{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borrowed Books - BIBLIONET</title>
    <link rel="stylesheet" href="{% static 'main/styles[Borrowed Books].css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="{% static 'main/messages.js' %}"></script>
    <style>
.messages {
    position: fixed;
    top: 40px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    max-width: 600px;
    width: 90%;
    display: flex;
    flex-direction: column;
    align-items: center;
    pointer-events: none;;
}


.alert-success {
  background-color: #e6f9ec;
  border-color: #4caf50 ;
  color: #256029 ;
  border-left: 6px solid #28a745;
  box-shadow: 0 4px 24px rgba(76,175,80,0.10);
}

.alert-error {
    background-color: #fdeaea ;
    border-color: #f44336 ;
    color: #7f1d1d;
    box-shadow: 0 4px 24px rgba(244,67,54,0.10);
 
}

.alert-warning {
  background-color: #fffbe6 ;
    border-color: #ff9800 ;
    color: #7c5700 ;
    box-shadow: 0 4px 24px rgba(255,152,0,0.10);
}

.alert-info {
  background-color: #e6f4fa !important;
    border-color: #2196f3 !important;
    color: #0b3556 !important;
    box-shadow: 0 4px 24px rgba(33,150,243,0.10);
}
body {
    background-image: url("{% static 'main/background.jpg' %}");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    min-height: 100vh;
  }

    </style>
</head>
<body>
<header>
    <div class="header-container">
        <a href="{% url 'home' %}"><img src="{% static 'main/LOGO.png' %}" alt="BIBLIONET Logo" class="logo"></a>
        <div>
            <h1>Biblionet</h1>
            <p>Connecting Minds, One Book at a Time</p>
        </div>
    </div>
    <nav>
        <ul>
            <li><a href="{% url 'home' %}"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="{% url 'book_list' %}"><i class="fas fa-book"></i> Book List</a></li>
            <li><a href="{% url 'borrowed_books'%}"><i class="fas fa-book-reader"></i>Borrowed Books</a></li>
            <li><a href="{% url 'Aboutus'%}"><i class="fas fa-info-circle"></i>About Us</a></li>
        </ul>
    </nav>
</header>

{% include 'messages.html' %}

<main>
    <h2>My Borrowed Books</h2>

    <div class="borrowing-status">
        <p>You have borrowed {{ borrowed_books|length }} out of {{ user.max_books }} allowed books.</p>
    </div>

    <div class="book-container">
        {% for borrowed in borrowed_books %}
            <div class="book">
                <div class="book-image">
                    <img src="{{ borrowed.book.image }}" alt="{{ borrowed.book.title }}">
                </div>
                <div class="book-info">
                    <h3>{{ borrowed.book.title }}</h3>
                    <p><strong>Author:</strong> {{ borrowed.book.author }}</p>
                    <p><strong>Borrowed at:</strong> {{ borrowed.borrowed_at }}</p>
                </div>
                <form action="{% url 'return_book' borrowed.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit" class="return-btn">
                        <i class="fas fa-undo"></i> Return Book
                    </button>
                </form>
            </div>
        {% empty %}
            <p class="no-books">You haven't borrowed any books yet.</p>
        {% endfor %}
    </div>
</main>

<footer>
    <p>&copy; 2025 Online Library.</p>
</footer>
</body>
</html>